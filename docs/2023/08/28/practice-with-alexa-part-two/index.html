<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="A way to voice control music practice tools on Windows using Alexa. Initially controlling Song Master playback of a backing track. In the previous post I introduced the concept of Using Alexa to contr">
<meta property="og:type" content="article">
<meta property="og:title" content="Practicing with Alexa and a PC Part Two">
<meta property="og:url" content="https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/index.html">
<meta property="og:site_name" content="FullMeasure Blog">
<meta property="og:description" content="A way to voice control music practice tools on Windows using Alexa. Initially controlling Song Master playback of a backing track. In the previous post I introduced the concept of Using Alexa to contr">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-08-28T11:01:00.000Z">
<meta property="article:modified_time" content="2023-08-28T21:09:46.958Z">
<meta property="article:author" content="Steve Lee">
<meta property="article:tag" content="music,technology,education">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Practicing with Alexa and a PC Part Two</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/awesome-musicality/">Awesome</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2023/08/14/practice-with-alexa/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&text=Practicing with Alexa and a PC Part Two"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&is_video=false&description=Practicing with Alexa and a PC Part Two"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Practicing with Alexa and a PC Part Two&body=Check out this article: https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&name=Practicing with Alexa and a PC Part Two&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#In-C"><span class="toc-number">1.</span> <span class="toc-text">In C</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Still-Crazy-After-All-the-Years"><span class="toc-number">2.</span> <span class="toc-text">Still Crazy After All the Years</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commands-json"><span class="toc-number">3.</span> <span class="toc-text">Commands.json</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Practicing with Alexa and a PC Part Two
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">FullMeasure Blog</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-08-28T11:01:00.000Z" itemprop="datePublished">2023-08-28</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><em><strong>A way to voice control music practice tools on Windows using Alexa. Initially controlling Song Master playback of a backing track.</strong></em></p>
<p>In the <a href="../../14/practice-with-alexa">previous post</a> I introduced the concept of Using Alexa to control Song Master for hands free music practice. Since then I’ve built out a solution that covers all my basic requirements with room to expand.</p>
<p>This involved digging deep into the technology behaviour and creating:</p>
<ul>
<li><code>cosc.exe</code> command line tool based on sendosc but which also displays received OSC packets</li>
<li><code>songmaster.cmd</code> script to abstract Song Master OSC commands for easy command line use</li>
<li><code>commands.json</code> to configure TRIGGERcmd for the Alexa skills</li>
</ul>
<p>These are all available on GitHub in the <a target="_blank" rel="noopener" href="https://github.com/music-practice-tools/cosc">music-practice-tools&#x2F;cosc</a> repository should you want to play. I’ll add a tutorial to simplify installing the various parts.</p>
<h2 id="In-C"><a href="#In-C" class="headerlink" title="In C"></a>In C</h2><p>The Windows CLI executable <code>cosc</code> sends OSC packets in the same way as <code>sendosc</code>. It also receives and displays packets for a specified time or until ctrl-C. It’s named for similarity to old war horse program <code>curl</code>, with ‘c’ meaning ‘see’.</p>
<p>It’s been over 30 years since I last did some serious C++ programming but fortunately it was like riding a bike. Visual Studio seemed like an old friend; it’s not changed much. I took the simple architectural approach of starting to receive as soon as we have sent. While this introduces a small potential race condition where ‘response’ messages might be missed, it works fine in practice and avoided more complex multi-thread code.</p>
<p>I was pleased to find the version of C++ supported by Visual Studio Community 2022 includes lambda functions. These allows functional programming (FP) which made the code much easier (and with far less boilerplate the OOP). The lambda syntax is straight forward and the “functional” standard library allows them to be easily passed to functions (and returned) as first class data, a basic feature of FP (higher order functions). Note pointers to functions are not the same thing, though close. It’s nice to see the C++ language evolving.</p>
<p>I found receiving OSC packets from Song Master to be invaluable for learning and debugging. Currently though Song Master messages are not fed back to Alexa, as explained below.</p>
<h2 id="Still-Crazy-After-All-the-Years"><a href="#Still-Crazy-After-All-the-Years" class="headerlink" title="Still Crazy After All the Years"></a>Still Crazy After All the Years</h2><p>I have kept my hand in with Windows cmd scripting by maintaining a script I created to build a version of Audacity with ASIO support on Windows. It’s still a maddening thing to develop with, having so many half baked concepts and nasty gotchas guaranteed to waste time. I probably should have learnt PowerShell which is now portable but I never liked the syntax. Give me bash script anyday, or maybe one day OSs will include Javascipt out of the box.</p>
<p>The script simply provides a slightly abstracted set of commands that map to cosc calls that forward OSC to Song Master. Here they are:</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">play &#123; on off &#125;</span><br><span class="line">speed &#123; <span class="number">20</span> <span class="number">40</span> <span class="number">50</span> <span class="number">60</span> <span class="number">70</span> <span class="number">80</span> <span class="number">90</span> <span class="number">100</span> <span class="number">120</span> &#125;</span><br><span class="line">pitch &#123; up down key&#125; &#123; octave <span class="number">1</span>...n &#125;</span><br><span class="line">mute &#123; on off &#125; &#123; <span class="number">1</span> - <span class="number">5</span> &#125;</span><br><span class="line">solo &#123; <span class="number">1</span> - <span class="number">5</span> off &#125;</span><br><span class="line">metronome &#123; on off &#125;</span><br><span class="line">loop &#123; on off bar section note track &#125;</span><br><span class="line"><span class="keyword">goto</span> &#123; <span class="built_in">start</span> end next previous &#125; [&#123;bar section note &#125;]</span><br><span class="line">playlist &#123; <span class="number">1</span>...n info songs next previous &#125;</span><br></pre></td></tr></table></figure>

<p>The parameters have been chosen to match the way TRIGGERcmd invokes them, partly as a result of Alexa Smart Home skill quirks.</p>
<h2 id="Commands-json"><a href="#Commands-json" class="headerlink" title="Commands.json"></a>Commands.json</h2><p>This file invokes the scriptfile with suitable parameters. It also parses on parameters that come from the Alexa Skills. This needs a little explanation.</p>
<p>TRIGGERcmds provides two types of Alexa skill that can be installed. The Smart Home skill and the basic skill. Of the two types, the Smart Home skill affords easier voice control, but has limited flexibility.</p>
<p>The Smart Home skill adds an Alexa device for each command. The advantage of this is that device have a predefined set of actions that can easily be invoked to cause parameters to be passed to the commands.</p>
<ul>
<li>“on”</li>
<li>“off”</li>
<li>a positive number - I found no way to make negative</li>
<li>a percentage - converted to a number between 0 and 100</li>
<li>a colour - no use to us here</li>
</ul>
<p>The TRIGGERcmd commands main “command” field is invoked for “On” with no parameters. The other values are passes as a parameter at the end of the command. For off TRIGGERcmd “offCommand” is invoked, with no parameter.</p>
<p>Many of the Song Master commands can thus be invoked with incantations such as:</p>
<ul>
<li>“alexa turn mac play on”</li>
<li>“alexa set mac speed 80”</li>
</ul>
<p>Where “turn” and “set” are optional.</p>
<p>Note I named the devices “mac <em>somehting</em>“ where “mac” stands for “music access”.</p>
<p>Commands with multiple parameters or other named parameters have to be invoked with the other Alexa skill. Like this:</p>
<ul>
<li>“alexa ask TC to run mac goto with parameter next section”</li>
</ul>
<p>Rather a mouthful and a touch unreliable command to the Smart Home device invocations. I hope something might improve here. Ie custom Smart Home skill parameter lexicons that can be configured in commands.json. Multiple parameters would be useful too. We could use numbers (or colours) for the named values but that would be just too much of a cognitive load for me.</p>
<p>But for now the common actions I require are available with the simpler invocation style.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/awesome-musicality/">Awesome</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#In-C"><span class="toc-number">1.</span> <span class="toc-text">In C</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Still-Crazy-After-All-the-Years"><span class="toc-number">2.</span> <span class="toc-text">Still Crazy After All the Years</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commands-json"><span class="toc-number">3.</span> <span class="toc-text">Commands.json</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&text=Practicing with Alexa and a PC Part Two"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&is_video=false&description=Practicing with Alexa and a PC Part Two"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Practicing with Alexa and a PC Part Two&body=Check out this article: https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&title=Practicing with Alexa and a PC Part Two"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://fullmeasure.uk/2023/08/28/practice-with-alexa-part-two/&name=Practicing with Alexa and a PC Part Two&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Steve Lee
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/awesome-musicality/">Awesome</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
